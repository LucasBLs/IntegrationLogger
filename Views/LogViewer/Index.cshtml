@using IntegrationLogger.Utils;
@model PaginatedList<IntegrationLogger.Models.IntegrationLog>
@{
    ViewData["Title"] = "Visualização de logs";
}

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Logs - Capa</h5>
        <form asp-action="Index" method="get">
            <div class="form-actions no-color">
                <p>
                    Buscar por IntegrationName: <input class="form-control-sm" type="search" name="SearchString" value="@ViewData["CurrentFilter"]" />
                    <input type="submit" value="Buscar" class="btn btn-light" />
                    @Html.ActionLink("Mostrar lista completa", "Index", new { @class = "link-default" })
                </p>
            </div>
        </form>
        <table class="table table-hover">
            <thead>
                <tr>
                    <td><b>IntegrationName</b></td>
                    <td><b>Message</b></td>
                    <td><b>SourceSystem</b></td>
                    <td><b>ExternalSystem</b></td>
                    <td><b>Timestamp</b></td>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                @foreach (var log in Model)
                {
                    <tr>
                        <td>
                            @Html.ActionLink(log.IntegrationName, "LogDetail", new { id = log.Id }, new { @class = "link-primary" })
                        </td>
                        <td>@log.Message</td>
                        <td>@log.SourceSystem</td>
                        <td>@log.ExternalSystem</td>
                        <td>@log.Timestamp</td>
                    </tr>
                }
            </tbody>
        </table>
        @{
            var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
            var nextDisabled = !Model.HasNextPage ? "disabled" : "";
        }

        @Html.ActionLink("Previous", "Index", new { sortlog = ViewData["CurrentSort"], pageNumber = Model.PageIndex - 1, currentFilter = ViewData["CurrentFilter"] }, new { @class = "btn btn-default " + prevDisabled })

        @Html.ActionLink("Next", "Index", new { sortlog = ViewData["CurrentSort"], pageNumber = Model.PageIndex + 1, currentFilter = ViewData["CurrentFilter"] }, new { @class = "btn btn-default " + nextDisabled })
    </div>
</div>